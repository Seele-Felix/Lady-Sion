# 动态图执行器测试用例文档

## 📋 测试哲学理念

**核心信念**: 动态类型语言能够更自然地表达图计算的本质，JSON是图结构的最佳载体

## 🎯 测试用例设计

### T1: 动态节点创建与类型推导 📝

**对应哲学文档**: AnimaWeave数学定义 - 定义5（节点七元组）
**验证的数学定义**: `n = (D_in, C_in, D_out, C_out, φ, concurrent_mode, D_optional)`
**使用的基础元素**: JSON节点定义、TypeScript类型推导、动态函数生成

**测试场景**: 
1. 通过JSON配置创建 `AddNode`，自动推导输入输出类型为 `number`
2. 通过JSON配置创建 `ConcatNode`，自动推导输入输出类型为 `string`
3. 验证错误类型输入时的优雅降级

**预期业务场景**: 
- 用户在Web UI中拖拽创建节点，系统自动生成对应的执行代码
- AI助手根据用户描述自动生成节点定义

### T2: 异步数据流处理 📝

**对应哲学文档**: AnimaWeave数学定义 - 定义24（状态转换关系）
**验证的数学定义**: `Ω → Ω'` 在异步环境下的正确性
**使用的基础元素**: Promise/async-await、事件循环、状态管理

**测试场景**:
1. 创建包含异步HTTP请求节点的图，验证数据流的正确传递
2. 创建包含定时器节点的图，验证时间序列数据的处理
3. 创建并行分支的图，验证多路异步执行的汇聚

**预期业务场景**:
- 数据处理流水线：爬虫→清洗→存储→分析
- 实时监控系统：采集→过滤→聚合→告警

### T3: JSON原生图结构表达 📝

**对应哲学文档**: AnimaWeave数学定义 - 定义10（AnimaWeave图三元组）
**验证的数学定义**: `G = (𝒩_G, 𝒟_G, ℰ_G)` 的JSON完整表达
**使用的基础元素**: JSON Schema、图拓扑验证、连接有效性检查

**测试场景**:
1. 从JSON文件加载简单线性图（A→B→C），验证执行正确性
2. 从JSON文件加载分支合并图（A→{B,C}→D），验证汇聚逻辑
3. 从JSON文件加载包含循环的图，验证状态循环处理

**预期业务场景**:
- 工作流配置：用户通过可视化编辑器设计业务流程
- 数据管道：数据工程师定义ETL流程的JSON配置

### T4: 控制流与数据流分离 📝

**对应哲学文档**: AnimaWeave数学定义 - 定义29（信号传输函数）
**验证的数学定义**: 控制信号传播机制 `SignalPropagation: Ω × Node → Ω'`
**使用的基础元素**: 事件系统、信号传递、条件执行

**测试场景**:
1. 创建条件分支图：根据输入数据的值决定执行路径
2. 创建循环控制图：实现 `while` 循环的图表达
3. 创建异常处理图：出错时的控制流重定向

**预期业务场景**:
- 审批流程：根据金额大小走不同的审批路径
- 重试机制：失败时自动重试，超过阈值则告警

## 🔨 实现状态追踪

- [📝] T1: 动态节点创建与类型推导 - 设计中
- [📝] T2: 异步数据流处理 - 设计中  
- [📝] T3: JSON原生图结构表达 - 设计中
- [📝] T4: 控制流与数据流分离 - 设计中

## 🎯 成功标准

每个测试必须验证：
1. **数学正确性**: 符合AnimaWeave数学定义的约束
2. **动态特性**: 体现TypeScript动态类型的优势
3. **实用性**: 解决真实的业务场景问题 